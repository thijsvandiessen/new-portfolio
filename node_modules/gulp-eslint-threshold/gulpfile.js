'use strict';

var gulp = require('gulp'),
	eslint = require('gulp-eslint'),
	eslintThreshold = require('./');

gulp.task('test', function() {

	gulp.src(['**/*.js', '!node_modules/**', '!coverage/**'])
		.pipe(eslint())
		.pipe(eslint.format())
		.pipe(eslintThreshold.afterWarnings(1, function(numberOfWarnings) {
			console.log('ESLint warnings (' + numberOfWarnings + ') equal to or greater than the threshold');
			//throw new Error('ESLint warnings (' + numberOfWarnings + ') equal to or greater than the threshold (' + thresholdWarnings + ')');
		}));

	gulp.src(['**/*.js', '!node_modules/**', '!coverage/**'])
		.pipe(eslint())
		.pipe(eslint.format())
		.pipe(eslintThreshold.afterErrors(1, function(numberOfErrors) {
			console.log('ESLint errors (' + numberOfErrors + ') equal to or greater than the threshold');
			//throw new Error('ESLint warnings (' + numberOfWarnings + ') equal to or greater than the threshold (' + thresholdWarnings + ')');
		}));

});
